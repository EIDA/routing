eida_fetch
----------

$ ./eida_fetch.py -v -y dataselect -N CH -S LIENZ -s '2014-10-14T10:00:00' -e '2014-10-14T10:01:00' -o data.mseed
getting routes from http://geofon.gfz-potsdam.de/eidaws/routing/1/query?service=dataselect&station=LIENZ&network=CH&starttime=2014-10-14T10%3A00%3A00&format=post&endtime=2014-10-14T10%3A01%3A00
getting data from http://eida.ethz.ch/fdsnws/dataselect/1/query
getting data from http://www.orfeus-eu.org/fdsnws/dataselect/1/query
received no data from http://www.orfeus-eu.org/fdsnws/dataselect/1/query
got 45568 bytes from http://eida.ethz.ch/fdsnws/dataselect/1/query

$ ./eida_fetch.py -v -y station -q level=channel -N CH -S LIENZ -s '2014-10-14T10:00:00' -e '2014-10-14T10:01:00' -o data.xml
getting routes from http://geofon.gfz-potsdam.de/eidaws/routing/1/query?service=station&station=LIENZ&network=CH&starttime=2014-10-14T10%3A00%3A00&format=post&endtime=2014-10-14T10%3A01%3A00
getting data from http://eida.ethz.ch/fdsnws/station/1/query
getting data from http://www.orfeus-eu.org/fdsnws/station/1/query
got 8756 bytes from http://eida.ethz.ch/fdsnws/station/1/query
got 3492 bytes from http://www.orfeus-eu.org/fdsnws/station/1/query

Note: XML data from multiple datacenters is simply concatenated, so the result
is not guaranteed to be a valid XML document.


Seiscomp 3
----------

$ ./eida_proxy.py &
fdsnws://localhost:8080/query ready

$ ~/seiscomp3/bin/seiscomp exec python

>>> from seiscomp3 import Core, IO, Logging
>>> Logging.enableConsoleLogging(Logging.getGlobalChannel("debug"))
>>> Logging.enableConsoleLogging(Logging.getGlobalChannel("info"))
>>> Logging.enableConsoleLogging(Logging.getGlobalChannel("warning"))
>>> Logging.enableConsoleLogging(Logging.getGlobalChannel("error"))
>>> t1 = Core.Time.FromString("2014-10-14 10:00:00", "%Y-%m-%d %H:%M:%S")
>>> t2 = Core.Time.FromString("2014-10-14 10:01:00", "%Y-%m-%d %H:%M:%S")
>>> recstream = IO.RecordStream.Create('fdsnws')
>>> recstream.setSource('localhost:8080/query')
>>> recstream.addStream("CH", "LIENZ", "", "HHZ", t1, t2)
>>> recinput = IO.RecordInput(recstream)

>>> for rec in recinput:
...     print "SC3 received", rec.networkCode(), rec.stationCode(), rec.locationCode(), rec.channelCode(), rec.startTime().toString("%Y-%m-%d %H:%M:%S")

19:45:52 [debug/Socket] localhost:8080 connected
19:45:52 [debug/FDSNWSConnection] Request: 2014,10,14,10,00,00 2014,10,14,10,01,00 CH LIENZ HHZ 
19:45:52 [debug/FDSNWSConnection] Sending request:
CH LIENZ -- HHZ 2014-10-14T10:00:00.0000 2014-10-14T10:01:00.0000

getting routes from http://geofon.gfz-potsdam.de/eidaws/routing/1/query?format=post
getting data from http://eida.ethz.ch/fdsnws/dataselect/1/query
19:45:54 [debug/FDSNWSConnection] [01] Transfer-Encoding: chunked
19:45:54 [debug/FDSNWSConnection]  -> enabled 'chunked' transfer
19:45:54 [debug/FDSNWSConnection] [02] Date: Fri, 17 Oct 2014 17:45:52 GMT
19:45:54 [debug/FDSNWSConnection] [03] Content-Type: application/vnd.fdsn.mseed
19:45:54 [debug/FDSNWSConnection] [04] Server: TwistedWeb/14.0.2
19:45:54 [debug/FDSNWSConnection] [05] 
SC3 received CH LIENZ  HHZ 2014-10-14 09:59:59
SC3 received CH LIENZ  HHZ 2014-10-14 10:00:03
SC3 received CH LIENZ  HHZ 2014-10-14 10:00:06
SC3 received CH LIENZ  HHZ 2014-10-14 10:00:10
SC3 received CH LIENZ  HHZ 2014-10-14 10:00:14
SC3 received CH LIENZ  HHZ 2014-10-14 10:00:17
SC3 received CH LIENZ  HHZ 2014-10-14 10:00:22
SC3 received CH LIENZ  HHZ 2014-10-14 10:00:26
got 8192 bytes from http://eida.ethz.ch/fdsnws/dataselect/1/query
SC3 received CH LIENZ  HHZ 2014-10-14 10:00:30
SC3 received CH LIENZ  HHZ 2014-10-14 10:00:34
SC3 received CH LIENZ  HHZ 2014-10-14 10:00:37
SC3 received CH LIENZ  HHZ 2014-10-14 10:00:42
SC3 received CH LIENZ  HHZ 2014-10-14 10:00:45
SC3 received CH LIENZ  HHZ 2014-10-14 10:00:49
SC3 received CH LIENZ  HHZ 2014-10-14 10:00:53
SC3 received CH LIENZ  HHZ 2014-10-14 10:00:57
19:45:54 [debug/RecordInput] RecordStream's end reached


ObsPy
-----

>>> import obspy_eida_client
>>> from obspy import UTCDateTime
>>> client = obspy_eida_client.Client(debug=True)
>>> t1=UTCDateTime('2014-10-14T10:00:00')
>>> t2=UTCDateTime('2014-10-14T10:01:00')
>>> st = client.get_waveforms("CH", "LIENZ", "*", "*", t1, t2)

getting routes from http://geofon.gfz-potsdam.de/eidaws/routing/1/query?network=CH&service=dataselect&format=post&station=LIENZ&location=%2A&starttime=2014-10-14T10%3A00%3A00.000000&endtime=2014-10-14T10%3A01%3A00.000000&channel=%2A
getting data from http://eida.ethz.ch/fdsnws/dataselect/1/query
getting data from http://www.orfeus-eu.org/fdsnws/dataselect/1/query
received no data from http://www.orfeus-eu.org/fdsnws/dataselect/1/query
got 45568 bytes from http://eida.ethz.ch/fdsnws/dataselect/1/query

>>> print st

9 Trace(s) in Stream:
CH.LIENZ..HGE | 2014-10-14T09:59:55.758300Z - 2014-10-14T10:01:03.416633Z | 120.0 Hz, 8120 samples
CH.LIENZ..HGN | 2014-10-14T09:59:59.258400Z - 2014-10-14T10:01:00.991733Z | 120.0 Hz, 7409 samples
CH.LIENZ..HGZ | 2014-10-14T09:59:58.266700Z - 2014-10-14T10:01:04.241700Z | 120.0 Hz, 7918 samples
CH.LIENZ..HHE | 2014-10-14T09:59:57.700000Z - 2014-10-14T10:01:00.625000Z | 120.0 Hz, 7552 samples
CH.LIENZ..HHN | 2014-10-14T09:59:58.841700Z - 2014-10-14T10:01:01.791700Z | 120.0 Hz, 7555 samples
CH.LIENZ..HHZ | 2014-10-14T09:59:59.241600Z - 2014-10-14T10:01:01.016600Z | 120.0 Hz, 7414 samples
CH.LIENZ..LHE | 2014-10-14T09:54:48.366600Z - 2014-10-14T10:05:42.366600Z | 1.0 Hz, 655 samples
CH.LIENZ..LHN | 2014-10-14T09:59:04.025000Z - 2014-10-14T10:04:36.025000Z | 1.0 Hz, 333 samples
CH.LIENZ..LHZ | 2014-10-14T09:56:35.400000Z - 2014-10-14T10:02:15.400000Z | 1.0 Hz, 341 samples

>>> st.plot()

>>> st = client.get_stations(t1, t2, network="CH", station="LIENZ", channel="HH?", level="channel")

getting routes from http://geofon.gfz-potsdam.de/eidaws/routing/1/query?network=CH&service=station&format=post&station=LIENZ&starttime=2014-10-14T10%3A00%3A00.000000&endtime=2014-10-14T10%3A01%3A00.000000&channel=HH%3F
getting data from http://eida.ethz.ch/fdsnws/station/1/query
got 3330 bytes from http://eida.ethz.ch/fdsnws/station/1/query

>>> print st

Inventory created at 2014-10-16T19:00:05.000000Z
        Sending institution: SeisComP3 (SED)
        Contains:
                Networks (1):
                        CH
                Stations (1):
                        CH.LIENZ (Kamor / St. Gall)
                Channels (3):
                        CH.LIENZ..HHE, CH.LIENZ..HHN, CH.LIENZ..HHZ

>>> st = client.get_stations(t1, t2, network="CH", station="LIENZ", channel="BH?", level="channel")

getting routes from http://geofon.gfz-potsdam.de/eidaws/routing/1/query?network=CH&service=station&format=post&station=LIENZ&starttime=2014-10-14T10%3A00%3A00.000000&endtime=2014-10-14T10%3A01%3A00.000000&channel=BH%3F
getting data from http://www.orfeus-eu.org/fdsnws/station/1/query
got 3492 bytes from http://www.orfeus-eu.org/fdsnws/station/1/query

>>> print st

Inventory created at 2014-10-16T19:00:14.000000Z
        Sending institution: SeisComP3 (ODC)
        Contains:
                Networks (1):
                        CH
                Stations (1):
                        CH.LIENZ (Kamor / St. Gall)
                Channels (3):
                        CH.LIENZ..BHE, CH.LIENZ..BHN, CH.LIENZ..BHZ

Note: get_stations() only works if the XML data comes from a single source.

